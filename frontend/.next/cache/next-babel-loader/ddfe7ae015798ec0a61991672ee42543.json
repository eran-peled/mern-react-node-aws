{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects\\\\mern-react-node-aws\\\\frontend\\\\pages\\\\admin\\\\category\\\\create.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { API } from '../../../config';\nimport { showSuccessMessage, showErrorMessage } from '../../../helpers/alerts';\nimport Layout from '../../../components/Layout';\nimport withAdmin from '../../withAdmin';\n\nconst Create = ({\n  user,\n  token\n}) => {\n  const {\n    0: state,\n    1: setState\n  } = useState({\n    name: '',\n    content: '',\n    error: '',\n    success: '',\n    formData: false && new FormData(),\n    buttonText: 'Create',\n    imageUploadText: 'Upload image'\n  });\n  const {\n    name,\n    content,\n    success,\n    error,\n    formData,\n    buttonText,\n    imageUploadText\n  } = state;\n\n  const handleChange = name => e => {\n    const value = name === 'image' ? e.target.files[0] : e.target.value;\n    const imageName = name === 'image' ? event.target.files[0].name : 'Upload image';\n    formData.set(name, value);\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      [name]: value,\n      error: '',\n      success: '',\n      imageUploadText: imageName\n    }));\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      buttonText: 'Creating'\n    })); // console.log(...formData);\n\n    try {\n      const response = await axios.post(`${API}/category`, formData, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log('CATEGORY CREATE RESPONSE', response);\n      setState(_objectSpread(_objectSpread({}, state), {}, {\n        name: '',\n        content: '',\n        formData: '',\n        buttonText: 'Created',\n        imageUploadText: 'Upload image',\n        success: `${response.data.name} is created`\n      }));\n    } catch (error) {\n      console.log('CATEGORY CREATE ERROR', error);\n      setState(_objectSpread(_objectSpread({}, state), {}, {\n        name: '',\n        buttonText: 'Create',\n        error: error.response.data.error\n      }));\n    }\n  };\n\n  const createCategoryForm = () => __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, __jsx(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, \"Name\"), __jsx(\"input\", {\n    onChange: handleChange('name'),\n    value: name,\n    type: \"text\",\n    className: \"form-control\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  })), __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, __jsx(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, \"Content\"), __jsx(\"textarea\", {\n    onChange: handleChange('content'),\n    value: content,\n    className: \"form-control\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  })), __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, __jsx(\"label\", {\n    className: \"btn btn-outline-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }, imageUploadText, __jsx(\"input\", {\n    onChange: handleChange('image'),\n    type: \"file\",\n    accept: \"image/*\",\n    className: \"form-control\",\n    hidden: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  }))), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, __jsx(\"button\", {\n    className: \"btn btn-outline-warning\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }, buttonText)));\n\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"col-md-6 offset-md-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  }, \"Create category\"), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }), success && showSuccessMessage(success), error && showErrorMessage(error), createCategoryForm())));\n};\n\nexport default withAdmin(Create);","map":{"version":3,"sources":["C:/Projects/mern-react-node-aws/frontend/pages/admin/category/create.js"],"names":["useState","useEffect","axios","API","showSuccessMessage","showErrorMessage","Layout","withAdmin","Create","user","token","state","setState","name","content","error","success","formData","FormData","buttonText","imageUploadText","handleChange","e","value","target","files","imageName","event","set","handleSubmit","preventDefault","response","post","headers","Authorization","console","log","data","createCategoryForm"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { API } from '../../../config';\r\nimport { showSuccessMessage, showErrorMessage } from '../../../helpers/alerts';\r\nimport Layout from '../../../components/Layout';\r\nimport withAdmin from '../../withAdmin';\r\n\r\nconst Create = ({ user, token }) => {\r\n    const [state, setState] = useState({\r\n        name: '',\r\n        content: '',\r\n        error: '',\r\n        success: '',\r\n        formData: process.browser && new FormData(),\r\n        buttonText: 'Create',\r\n        imageUploadText: 'Upload image'\r\n    });\r\n\r\n    const { name, content, success, error, formData, buttonText, imageUploadText } = state;\r\n\r\n    const handleChange = name => e => {\r\n        const value = name === 'image' ? e.target.files[0] : e.target.value;\r\n        const imageName = name === 'image' ? event.target.files[0].name : 'Upload image';\r\n        formData.set(name, value);\r\n        setState({ ...state, [name]: value, error: '', success: '', imageUploadText: imageName });\r\n    };\r\n\r\n    const handleSubmit = async e => {\r\n        e.preventDefault();\r\n        setState({ ...state, buttonText: 'Creating' });\r\n        // console.log(...formData);\r\n        try {\r\n            const response = await axios.post(`${API}/category`, formData, {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`\r\n                }\r\n            });\r\n            console.log('CATEGORY CREATE RESPONSE', response);\r\n            setState({\r\n                ...state,\r\n                name: '',\r\n                content: '',\r\n                formData: '',\r\n                buttonText: 'Created',\r\n                imageUploadText: 'Upload image',\r\n                success: `${response.data.name} is created`\r\n            });\r\n        } catch (error) {\r\n            console.log('CATEGORY CREATE ERROR', error);\r\n            setState({ ...state, name: '', buttonText: 'Create', error: error.response.data.error });\r\n        }\r\n    };\r\n\r\n    const createCategoryForm = () => (\r\n        <form onSubmit={handleSubmit}>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input onChange={handleChange('name')} value={name} type=\"text\" className=\"form-control\" required />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Content</label>\r\n                <textarea onChange={handleChange('content')} value={content} className=\"form-control\" required />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"btn btn-outline-secondary\">\r\n                    {imageUploadText}\r\n                    <input\r\n                        onChange={handleChange('image')}\r\n                        type=\"file\"\r\n                        accept=\"image/*\"\r\n                        className=\"form-control\"\r\n                        hidden\r\n                    />\r\n                </label>\r\n            </div>\r\n            <div>\r\n                <button className=\"btn btn-outline-warning\">{buttonText}</button>\r\n            </div>\r\n        </form>\r\n    );\r\n\r\n    return (\r\n        <Layout>\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 offset-md-3\">\r\n                    <h1>Create category</h1>\r\n                    <br />\r\n                    {success && showSuccessMessage(success)}\r\n                    {error && showErrorMessage(error)}\r\n                    {createCategoryForm()}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default withAdmin(Create);\r\n"]},"metadata":{},"sourceType":"module"}