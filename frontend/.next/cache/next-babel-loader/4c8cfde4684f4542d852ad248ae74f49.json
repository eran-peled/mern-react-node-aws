{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from '../../components/Layout';\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport axios from 'axios';\nimport moment from 'moment';\nimport { API } from '../../config';\nimport { getCookie } from '../../helpers/auth';\nimport withUser from '../withUser';\n\nconst User = ({\n  user,\n  userLinks,\n  token\n}) => {\n  const confirmDelete = (e, id) => {\n    e.preventDefault(); // console.log('delete > ', slug);\n\n    let answer = window.confirm('Are you sure you want to delete?');\n\n    if (answer) {\n      handleDelete(id);\n    }\n  };\n\n  const handleDelete = async id => {\n    console.log('delete link > ', id);\n\n    try {\n      const response = await axios.delete(`${API}/link/${id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log('LINK DELETE SUCCESS ', response);\n      Router.replace('/user');\n    } catch (error) {\n      console.log('LINK DELETE ', error);\n    }\n  };\n\n  const listOfLinks = () => userLinks.map((l, i) => __jsx(\"div\", {\n    key: i,\n    className: \"row alert alert-primary p-2\"\n  }, __jsx(\"div\", {\n    className: \"col-md-8\"\n  }, __jsx(\"a\", {\n    href: l.url,\n    target: \"_blank\"\n  }, __jsx(\"h5\", {\n    className: \"pt-2\"\n  }, l.title), __jsx(\"h6\", {\n    className: \"pt-2 text-danger\",\n    style: {\n      fontSize: '12px'\n    }\n  }, l.url))), __jsx(\"div\", {\n    className: \"col-md-4 pt-2\"\n  }, __jsx(\"span\", {\n    className: \"pull-right\"\n  }, moment(l.createdAt).fromNow(), \" by \", l.postedBy.name)), __jsx(\"div\", {\n    className: \"col-md-12\"\n  }, __jsx(\"span\", {\n    className: \"badge text-dark\"\n  }, l.type, \" / \", l.medium), l.categories.map((c, i) => __jsx(\"span\", {\n    key: i,\n    className: \"badge text-success\"\n  }, c.name)), __jsx(\"span\", {\n    className: \"badge text-secondary\"\n  }, l.clicks, \" clicks\"), __jsx(Link, {\n    href: `/user/link/${l._id}`\n  }, __jsx(\"span\", {\n    className: \"badge text-warning pull-right\"\n  }, \"Update\")), __jsx(\"span\", {\n    onClick: e => confirmDelete(e, l._id),\n    className: \"badge text-danger pull-right\"\n  }, \"Delete\"))));\n\n  return __jsx(Layout, null, __jsx(\"h1\", null, user.name, \"'s dashboard \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"/\", user.role)), __jsx(\"hr\", null), __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-md-4\"\n  }, __jsx(\"ul\", {\n    className: \"nav flex-column\"\n  }, __jsx(\"li\", {\n    className: \"nav-item\"\n  }, __jsx(Link, {\n    href: \"/user/link/create\"\n  }, __jsx(\"a\", {\n    className: \"nav link\"\n  }, \"Submit a link\"))), __jsx(\"li\", {\n    className: \"nav-item\"\n  }, __jsx(Link, {\n    href: \"/user/profile/update\"\n  }, __jsx(\"a\", {\n    className: \"nav link\"\n  }, \"Update profile\"))))), __jsx(\"div\", {\n    className: \"col-md-8\"\n  }, __jsx(\"h2\", null, \"Your links\"), __jsx(\"br\", null), listOfLinks())));\n};\n\nexport default withUser(User);","map":null,"metadata":{},"sourceType":"module"}