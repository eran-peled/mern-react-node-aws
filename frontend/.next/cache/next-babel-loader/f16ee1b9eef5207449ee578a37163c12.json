{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from '../../components/Layout';\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport axios from 'axios';\nimport moment from 'moment';\nimport { API } from '../../config';\nimport { getCookie } from '../../helpers/auth';\nimport withUser from '../withUser';\n\nvar User = function User(_ref) {\n  var user = _ref.user,\n      userLinks = _ref.userLinks,\n      token = _ref.token;\n\n  var confirmDelete = function confirmDelete(e, id) {\n    e.preventDefault(); // console.log('delete > ', slug);\n\n    var answer = window.confirm('Are you sure you want to delete?');\n\n    if (answer) {\n      handleDelete(id);\n    }\n  };\n\n  var handleDelete = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log('delete link > ', id);\n              _context.prev = 1;\n              _context.next = 4;\n              return axios[\"delete\"](\"\".concat(API, \"/link/\").concat(id), {\n                headers: {\n                  Authorization: \"Bearer \".concat(token)\n                }\n              });\n\n            case 4:\n              response = _context.sent;\n              console.log('LINK DELETE SUCCESS ', response);\n              Router.replace('/user');\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](1);\n              console.log('LINK DELETE ', _context.t0);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 9]]);\n    }));\n\n    return function handleDelete(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var listOfLinks = function listOfLinks() {\n    return userLinks.map(function (l, i) {\n      return __jsx(\"div\", {\n        key: i,\n        className: \"row alert alert-primary p-2\"\n      }, __jsx(\"div\", {\n        className: \"col-md-8\"\n      }, __jsx(\"a\", {\n        href: l.url,\n        target: \"_blank\"\n      }, __jsx(\"h5\", {\n        className: \"pt-2\"\n      }, l.title), __jsx(\"h6\", {\n        className: \"pt-2 text-danger\",\n        style: {\n          fontSize: '12px'\n        }\n      }, l.url))), __jsx(\"div\", {\n        className: \"col-md-4 pt-2\"\n      }, __jsx(\"span\", {\n        className: \"pull-right\"\n      }, moment(l.createdAt).fromNow(), \" by \", l.postedBy.name)), __jsx(\"div\", {\n        className: \"col-md-12\"\n      }, __jsx(\"span\", {\n        className: \"badge text-dark\"\n      }, l.type, \" / \", l.medium), l.categories.map(function (c, i) {\n        return __jsx(\"span\", {\n          key: i,\n          className: \"badge text-success\"\n        }, c.name);\n      }), __jsx(\"span\", {\n        className: \"badge text-secondary\"\n      }, l.clicks, \" clicks\"), __jsx(Link, {\n        href: \"/user/link/\".concat(l._id)\n      }, __jsx(\"span\", {\n        className: \"badge text-warning pull-right\"\n      }, \"Update\")), __jsx(\"span\", {\n        onClick: function onClick(e) {\n          return confirmDelete(e, l._id);\n        },\n        className: \"badge text-danger pull-right\"\n      }, \"Delete\")));\n    });\n  };\n\n  return __jsx(Layout, null, __jsx(\"h1\", null, user.name, \"'s dashboard \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"/\", user.role)), __jsx(\"hr\", null), __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-md-4\"\n  }, __jsx(\"ul\", {\n    className: \"nav flex-column\"\n  }, __jsx(\"li\", {\n    className: \"nav-item\"\n  }, __jsx(Link, {\n    href: \"/user/link/create\"\n  }, __jsx(\"a\", {\n    className: \"nav link\"\n  }, \"Submit a link\"))), __jsx(\"li\", {\n    className: \"nav-item\"\n  }, __jsx(Link, {\n    href: \"/user/profile/update\"\n  }, __jsx(\"a\", {\n    className: \"nav link\"\n  }, \"Update profile\"))))), __jsx(\"div\", {\n    className: \"col-md-8\"\n  }, __jsx(\"h2\", null, \"Your links\"), __jsx(\"br\", null), listOfLinks())));\n};\n\nexport default withUser(User);","map":null,"metadata":{},"sourceType":"module"}