{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from 'react';\nimport Layout from '../components/Layout';\nimport axios from 'axios';\nimport moment from 'moment';\nimport Link from 'next/link';\nimport { API } from '../config';\n\nconst Home = ({\n  categories\n}) => {\n  const {\n    0: popular,\n    1: setPopular\n  } = useState([]);\n  useEffect(() => {\n    loadPopular();\n  }, []);\n\n  const loadPopular = async () => {\n    const response = await axios.get(`${API}/link/popular`); // console.log(response);\n\n    setPopular(response.data);\n  };\n\n  const handleClick = async linkId => {\n    const response = await axios.put(`${API}/click-count`, {\n      linkId\n    });\n    loadPopular();\n  };\n\n  const listOfLinks = () => popular.map((l, i) => __jsx(\"div\", {\n    key: i,\n    className: \"row alert alert-secondary p-2\"\n  }, __jsx(\"div\", {\n    className: \"col-md-8\",\n    onClick: () => handleClick(l._id)\n  }, __jsx(\"a\", {\n    href: l.url,\n    target: \"_blank\"\n  }, __jsx(\"h5\", {\n    className: \"pt-2\"\n  }, l.title), __jsx(\"h6\", {\n    className: \"pt-2 text-danger\",\n    style: {\n      fontSize: '12px'\n    }\n  }, l.url))), __jsx(\"div\", {\n    className: \"col-md-4 pt-2\"\n  }, __jsx(\"span\", {\n    className: \"pull-right\"\n  }, moment(l.createdAt).fromNow(), \" by \", l.postedBy.name)), __jsx(\"div\", {\n    className: \"col-md-12\"\n  }, __jsx(\"span\", {\n    className: \"badge text-dark\"\n  }, l.type, \" \", l.medium), l.categories.map((c, i) => __jsx(\"span\", {\n    key: i,\n    className: \"badge text-success\"\n  }, c.name)), __jsx(\"span\", {\n    className: \"badge text-secondary pull-right\"\n  }, l.clicks, \" clicks\"))));\n\n  const listCategories = () => categories.map((c, i) => __jsx(Link, {\n    key: i,\n    href: `/links/${c.slug}`\n  }, __jsx(\"a\", {\n    style: {\n      border: '1px solid red'\n    },\n    className: \"bg-light p-3 col-md-4\"\n  }, __jsx(\"div\", null, __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-md-4\"\n  }, __jsx(\"img\", {\n    src: c.image && c.image.url,\n    alt: c.name,\n    style: {\n      width: '100px',\n      height: 'auto'\n    },\n    className: \"pr-3\"\n  })), __jsx(\"div\", {\n    className: \"col-md-8\"\n  }, __jsx(\"h3\", null, c.name)))))));\n\n  return __jsx(Layout, null, __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-md-12\"\n  }, __jsx(\"h1\", {\n    className: \"font-weight-bold\"\n  }, \"Browse Tutorials/Courses\"), __jsx(\"br\", null))), __jsx(\"div\", {\n    className: \"row\"\n  }, listCategories()), __jsx(\"div\", {\n    className: \"row pt-5\"\n  }, __jsx(\"h2\", {\n    className: \"font-weight-bold pb-3\"\n  }, \"Trending \", popular.length), __jsx(\"div\", {\n    className: \"col-md-12 overflow-hidden\"\n  }, listOfLinks())));\n};\n\nHome.getInitialProps = async () => {\n  const response = await axios.get(`${API}/categories`);\n  return {\n    categories: response.data\n  };\n};\n\nexport default Home;","map":null,"metadata":{},"sourceType":"module"}