{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Projects\\\\mern-react-node-aws\\\\frontend\\\\pages\\\\admin\\\\category\\\\create.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { API } from '../../../config';\nimport { showSuccessMessage, showErrorMessage } from '../../../helpers/alerts';\nimport Layout from '../../../components/Layout';\nimport withAdmin from '../../withAdmin';\n\nvar Create = function Create(_ref) {\n  _s();\n\n  var user = _ref.user,\n      token = _ref.token;\n\n  var _useState = useState({\n    name: '',\n    content: '',\n    error: '',\n    success: '',\n    formData: true && new FormData(),\n    buttonText: 'Create',\n    imageUploadText: 'Upload image'\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var name = state.name,\n      content = state.content,\n      success = state.success,\n      error = state.error,\n      formData = state.formData,\n      buttonText = state.buttonText,\n      imageUploadText = state.imageUploadText;\n\n  var handleChange = function handleChange(name) {\n    return function (e) {\n      var _objectSpread2;\n\n      var value = name === 'image' ? e.target.files[0] : e.target.value;\n      var imageName = name === 'image' ? event.target.files[0].name : 'Upload image';\n      formData.set(name, value);\n      setState(_objectSpread(_objectSpread({}, state), {}, (_objectSpread2 = {}, _defineProperty(_objectSpread2, name, value), _defineProperty(_objectSpread2, \"error\", ''), _defineProperty(_objectSpread2, \"success\", ''), _defineProperty(_objectSpread2, \"imageUploadText\", imageName), _objectSpread2)));\n    };\n  };\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              setState(_objectSpread(_objectSpread({}, state), {}, {\n                buttonText: 'Creating'\n              })); // console.log(...formData);\n\n              _context.prev = 2;\n              _context.next = 5;\n              return axios.post(\"\".concat(API, \"/category\"), formData, {\n                headers: {\n                  Authorization: \"Bearer \".concat(token)\n                }\n              });\n\n            case 5:\n              response = _context.sent;\n              console.log('CATEGORY CREATE RESPONSE', response);\n              setState(_objectSpread(_objectSpread({}, state), {}, {\n                name: '',\n                content: '',\n                formData: '',\n                buttonText: 'Created',\n                imageUploadText: 'Upload image',\n                success: \"\".concat(response.data.name, \" is created\")\n              }));\n              _context.next = 14;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](2);\n              console.log('CATEGORY CREATE ERROR', _context.t0);\n              setState(_objectSpread(_objectSpread({}, state), {}, {\n                name: '',\n                buttonText: 'Create',\n                error: _context.t0.response.data.error\n              }));\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 10]]);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var createCategoryForm = function createCategoryForm() {\n    return __jsx(\"form\", {\n      onSubmit: handleSubmit,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }\n    }, __jsx(\"div\", {\n      className: \"form-group\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }\n    }, __jsx(\"label\", {\n      className: \"text-muted\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }\n    }, \"Name\"), __jsx(\"input\", {\n      onChange: handleChange('name'),\n      value: name,\n      type: \"text\",\n      className: \"form-control\",\n      required: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }\n    })), __jsx(\"div\", {\n      className: \"form-group\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }\n    }, __jsx(\"label\", {\n      className: \"text-muted\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }\n    }, \"Content\"), __jsx(\"textarea\", {\n      onChange: handleChange('content'),\n      value: content,\n      className: \"form-control\",\n      required: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }\n    })), __jsx(\"div\", {\n      className: \"form-group\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    }, __jsx(\"label\", {\n      className: \"btn btn-outline-secondary\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }\n    }, imageUploadText, __jsx(\"input\", {\n      onChange: handleChange('image'),\n      type: \"file\",\n      accept: \"image/*\",\n      className: \"form-control\",\n      hidden: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }\n    }))), __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }\n    }, __jsx(\"button\", {\n      className: \"btn btn-outline-warning\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, buttonText)));\n  };\n\n  return __jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"col-md-6 offset-md-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }, __jsx(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  }, \"Create category\"), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }), success && showSuccessMessage(success), error && showErrorMessage(error), createCategoryForm())));\n};\n\n_s(Create, \"tA0wCqrMOQWK7XiXy/2O+lYrc04=\");\n\n_c = Create;\nexport default _c2 = withAdmin(Create);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Create\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["C:/Projects/mern-react-node-aws/frontend/pages/admin/category/create.js"],"names":["useState","useEffect","axios","API","showSuccessMessage","showErrorMessage","Layout","withAdmin","Create","user","token","name","content","error","success","formData","FormData","buttonText","imageUploadText","state","setState","handleChange","e","value","target","files","imageName","event","set","handleSubmit","preventDefault","post","headers","Authorization","response","console","log","data","createCategoryForm"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { API } from '../../../config';\r\nimport { showSuccessMessage, showErrorMessage } from '../../../helpers/alerts';\r\nimport Layout from '../../../components/Layout';\r\nimport withAdmin from '../../withAdmin';\r\n\r\nconst Create = ({ user, token }) => {\r\n    const [state, setState] = useState({\r\n        name: '',\r\n        content: '',\r\n        error: '',\r\n        success: '',\r\n        formData: process.browser && new FormData(),\r\n        buttonText: 'Create',\r\n        imageUploadText: 'Upload image'\r\n    });\r\n\r\n    const { name, content, success, error, formData, buttonText, imageUploadText } = state;\r\n\r\n    const handleChange = name => e => {\r\n        const value = name === 'image' ? e.target.files[0] : e.target.value;\r\n        const imageName = name === 'image' ? event.target.files[0].name : 'Upload image';\r\n        formData.set(name, value);\r\n        setState({ ...state, [name]: value, error: '', success: '', imageUploadText: imageName });\r\n    };\r\n\r\n    const handleSubmit = async e => {\r\n        e.preventDefault();\r\n        setState({ ...state, buttonText: 'Creating' });\r\n        // console.log(...formData);\r\n        try {\r\n            const response = await axios.post(`${API}/category`, formData, {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`\r\n                }\r\n            });\r\n            console.log('CATEGORY CREATE RESPONSE', response);\r\n            setState({\r\n                ...state,\r\n                name: '',\r\n                content: '',\r\n                formData: '',\r\n                buttonText: 'Created',\r\n                imageUploadText: 'Upload image',\r\n                success: `${response.data.name} is created`\r\n            });\r\n        } catch (error) {\r\n            console.log('CATEGORY CREATE ERROR', error);\r\n            setState({ ...state, name: '', buttonText: 'Create', error: error.response.data.error });\r\n        }\r\n    };\r\n\r\n    const createCategoryForm = () => (\r\n        <form onSubmit={handleSubmit}>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input onChange={handleChange('name')} value={name} type=\"text\" className=\"form-control\" required />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Content</label>\r\n                <textarea onChange={handleChange('content')} value={content} className=\"form-control\" required />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"btn btn-outline-secondary\">\r\n                    {imageUploadText}\r\n                    <input\r\n                        onChange={handleChange('image')}\r\n                        type=\"file\"\r\n                        accept=\"image/*\"\r\n                        className=\"form-control\"\r\n                        hidden\r\n                    />\r\n                </label>\r\n            </div>\r\n            <div>\r\n                <button className=\"btn btn-outline-warning\">{buttonText}</button>\r\n            </div>\r\n        </form>\r\n    );\r\n\r\n    return (\r\n        <Layout>\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 offset-md-3\">\r\n                    <h1>Create category</h1>\r\n                    <br />\r\n                    {success && showSuccessMessage(success)}\r\n                    {error && showErrorMessage(error)}\r\n                    {createCategoryForm()}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default withAdmin(Create);\r\n"]},"metadata":{},"sourceType":"module"}