{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[27],{Kvvq:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/links/[slug]\",function(){return a(\"e7Ch\")}])},e7Ch:function(e,t,a){\"use strict\";a.r(t);var n=a(\"KQm4\"),s=a(\"o0o1\"),r=a.n(s),c=a(\"HaE+\"),l=a(\"q1tI\"),i=a.n(l),o=a(\"5Yp1\"),u=(a(\"YFqc\"),a(\"8Kt/\")),p=a.n(u),m=a(\"vDqi\"),d=a.n(m),g=a(\"wHCo\"),k=a.n(g),f=a(\"wd/R\"),y=a.n(f),N=a(\"obyI\"),v=a(\"RotF\"),b=a.n(v),h=i.a.createElement,w=function(e){var t=e.query,a=e.category,s=e.links,i=e.totalLinks,u=e.linksLimit,m=(e.linkSkip,Object(l.useState)(s)),g=m[0],f=m[1],v=Object(l.useState)(u),w=v[0],x=(v[1],Object(l.useState)(0)),_=x[0],j=x[1],O=Object(l.useState)(i),S=O[0],q=O[1],E=Object(l.useState)([]),L=E[0],C=E[1],I=function(e){return e.replace(/<\\/?[^>]+(>|$)/g,\"\")};Object(l.useEffect)((function(){K()}),[]);var K=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(\"\".concat(N.a,\"/link/popular/\").concat(a.slug));case 2:t=e.sent,C(t.data);case 4:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.put(\"\".concat(N.a,\"/click-count\"),{linkId:t});case 2:e.sent,K();case 4:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(c.a)(r.a.mark((function e(){var a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=_+w,e.next=3,d.a.post(\"\".concat(N.a,\"/category/\").concat(t.slug),{skip:a,limit:w});case 3:s=e.sent,f([].concat(Object(n.a)(g),Object(n.a)(s.data.links))),console.log(\"allLinks\",g),console.log(\"response.data.links.length\",s.data.links.length),q(s.data.links.length),j(a);case 9:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return h(l.Fragment,null,h(p.a,null,h(\"title\",null,a.name,\" | \",N.b),h(\"meta\",{name:\"description\",content:I(a.content.substring(0,160))}),h(\"meta\",{property:\"og:title\",content:a.name}),h(\"meta\",{property:\"og:description\",content:I(a.content.substring(0,160))}),h(\"meta\",{property:\"og:image\",content:a.image.url}),h(\"meta\",{property:\"og:image:secure_url\",content:a.image.url})),h(o.a,null,h(\"div\",{className:\"row\"},h(\"div\",{className:\"col-md-8\"},h(\"h1\",{className:\"display-4 font-weight-bold\"},a.name,\" - URL/Links\"),h(\"div\",{className:\"lead alert alert-secondary pt-4\"},k()(a.content||\"\"))),h(\"div\",{className:\"col-md-4\"},h(\"img\",{src:a.image.url,alt:a.name,style:{width:\"auto\",maxHeight:\"200px\"}}))),h(\"br\",null),h(b.a,{pageStart:0,loadMore:H,hasMore:S>0&&S>=w,loader:h(\"img\",{key:0,src:\"/static/images/loading.gif\",alt:\"loading\"})},h(\"div\",{className:\"row\"},h(\"div\",{className:\"col-md-8\"},g.map((function(e,t){return h(\"div\",{key:t,className:\"row alert alert-primary p-2\"},h(\"div\",{className:\"col-md-8\",onClick:function(t){return F(e._id)}},h(\"a\",{href:e.url,target:\"_blank\"},h(\"h5\",{className:\"pt-2\"},e.title),h(\"h6\",{className:\"pt-2 text-danger\",style:{fontSize:\"12px\"}},e.url))),h(\"div\",{className:\"col-md-4 pt-2\"},h(\"span\",{className:\"pull-right\"},y()(e.createdAt).fromNow(),\" by \",e.postedBy.name),h(\"br\",null),h(\"span\",{className:\"badge text-secondary pull-right\"},e.clicks,\" clicks\")),h(\"div\",{className:\"col-md-12\"},h(\"span\",{className:\"badge text-dark\"},e.type,\" / \",e.medium),e.categories.map((function(e,t){return h(\"span\",{key:t,className:\"badge text-success\"},e.name)}))))}))),h(\"div\",{className:\"col-md-4\"},h(\"h2\",{className:\"lead\"},\"Most popular in \",a.name),h(\"div\",{className:\"p-3\"},L.map((function(e,t){return h(\"div\",{key:t,className:\"row alert alert-secondary p-2\"},h(\"div\",{className:\"col-md-8\",onClick:function(){return F(e._id)}},h(\"a\",{href:e.url,target:\"_blank\"},h(\"h5\",{className:\"pt-2\"},e.title),h(\"h6\",{className:\"pt-2 text-danger\",style:{fontSize:\"12px\"}},e.url))),h(\"div\",{className:\"col-md-4 pt-2\"},h(\"span\",{className:\"pull-right\"},y()(e.createdAt).fromNow(),\" by \",e.postedBy.name)),h(\"div\",{className:\"col-md-12\"},h(\"span\",{className:\"badge text-dark\"},e.type,\" \",e.medium),e.categories.map((function(e,t){return h(\"span\",{key:t,className:\"badge text-success\"},e.name)})),h(\"span\",{className:\"badge text-secondary pull-right\"},e.clicks,\" clicks\")))}))))))))};w.getInitialProps=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,s,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query,t.req,n=0,s=2,e.next=5,d.a.post(\"\".concat(N.a,\"/category/\").concat(a.slug),{skip:n,limit:s});case 5:return c=e.sent,e.abrupt(\"return\",{query:a,category:c.data.category,links:c.data.links,totalLinks:c.data.links.length,linksLimit:s,linkSkip:n});case 7:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.default=w}},[[\"Kvvq\",1,0,8,2,3,4,5,7,6,10]]]);","extractedComments":[]}