{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[31],{\"10oZ\":function(e,t,r){\"use strict\";r.d(t,\"b\",(function(){return c})),r.d(t,\"a\",(function(){return o}));var n=r(\"q1tI\"),a=r.n(n).a.createElement,c=function(e){return a(\"div\",{className:\"alert alert-success\"},e)},o=function(e){return a(\"div\",{className:\"alert alert-error\"},e)}},KJME:function(e,t,r){\"use strict\";r.r(t);var n=r(\"o0o1\"),a=r.n(n),c=r(\"rePB\"),o=r(\"HaE+\"),s=r(\"q1tI\"),i=r.n(s),u=r(\"vDqi\"),l=r.n(u),m=r(\"obyI\"),p=r(\"rZ7M\"),f=i.a.createElement;function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(e){var t=function(t){return f(e,t)};return t.getInitialProps=function(){var t=Object(o.a)(a.a.mark((function t(r){var n,c,o,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Object(p.b)(\"token\",r.req),c=null,o=[],!n){t.next=16;break}return t.prev=4,t.next=7,l.a.get(\"\".concat(m.a,\"/user\"),{headers:{authorization:\"Bearer \".concat(n),contentType:\"application/json\"}});case 7:s=t.sent,console.log(\"response in withUser\",s),c=s.data.user,o=s.data.links,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),401===t.t0.response.status&&(c=null);case 16:if(null!==c){t.next=21;break}r.res.writeHead(302,{Location:\"/\"}),r.res.end(),t.next=36;break;case 21:if(t.t1=b,t.t2=b,t.t3={},!e.getInitialProps){t.next=30;break}return t.next=27,e.getInitialProps(r);case 27:t.t4=t.sent,t.next=31;break;case 30:t.t4={};case 31:return t.t5=t.t4,t.t6=(0,t.t2)(t.t3,t.t5),t.t7={},t.t8={user:c,token:n,userLinks:o},t.abrupt(\"return\",(0,t.t1)(t.t6,t.t7,t.t8));case 36:case\"end\":return t.stop()}}),t,null,[[4,13]])})));return function(e){return t.apply(this,arguments)}}(),t}},KQm4:function(e,t,r){\"use strict\";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if(\"undefined\"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if(\"string\"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}r.d(t,\"a\",(function(){return a}))},XL7u:function(e,t,r){\"use strict\";r.r(t);var n=r(\"KQm4\"),a=r(\"o0o1\"),c=r.n(a),o=r(\"rePB\"),s=r(\"HaE+\"),i=r(\"q1tI\"),u=r.n(i),l=r(\"5Yp1\"),m=r(\"vDqi\"),p=r.n(m),f=r(\"KJME\"),d=r(\"rZ7M\"),b=r(\"obyI\"),v=r(\"10oZ\"),y=u.a.createElement;function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=function(e){var t=e.oldLink,r=e.token,a=Object(i.useState)({title:t.title,url:t.url,categories:t.categories,loadedCategories:[],success:\"\",error:\"\",type:t.type,medium:t.medium}),o=a[0],m=a[1],f=o.title,g=o.url,O=o.categories,h=o.loadedCategories,j=o.success,N=o.error,w=o.type,P=o.medium;Object(i.useEffect)((function(){x()}),[j]);var x=function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(\"\".concat(b.a,\"/categories\"));case 2:t=e.sent,m(k(k({},o),{},{loadedCategories:t.data}));case 4:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(e){m(k(k({},o),{},{title:e.target.value,error:\"\",success:\"\"}))},_=function(e){m(k(k({},o),{},{url:e.target.value,error:\"\",success:\"\"}))},I=function(){var e=Object(s.a)(c.a.mark((function e(n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=Object(d.c)()&&\"admin\"===Object(d.c)().role?\"\".concat(b.a,\"/link/admin/\").concat(t._id):\"\".concat(b.a,\"/link/\").concat(t._id),e.prev=2,e.next=5,p.a.put(a,{title:f,url:g,categories:O,type:w,medium:P},{headers:{Authorization:\"Bearer \".concat(r)}});case 5:e.sent,m(k(k({},o),{},{success:\"Link is updated\"})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(\"LINK SUBMIT ERROR\",e.t0),m(k(k({},o),{},{error:e.t0.response.data.error}));case 13:case\"end\":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),C=function(e){m(k(k({},o),{},{type:e.target.value,success:\"\",error:\"\"}))},L=function(e){m(k(k({},o),{},{medium:e.target.value,success:\"\",error:\"\"}))},S=function(e){return function(){var t=O.indexOf(e),r=Object(n.a)(O);-1===t?r.push(e):r.splice(t,1),console.log(\"all >> categories\",r),m(k(k({},o),{},{categories:r,success:\"\",error:\"\"}))}};return y(l.a,null,y(\"div\",{className:\"row\"},y(\"div\",{className:\"col-md-12\"},y(\"h1\",null,\"Update Link/URL\"),y(\"br\",null))),y(\"div\",{className:\"row\"},y(\"div\",{className:\"col-md-4\"},y(\"div\",{className:\"form-group\"},y(\"label\",{className:\"text-muted ml-4\"},\"Category\"),y(\"ul\",{style:{maxHeight:\"100px\",overflowY:\"scroll\"}},h&&h.map((function(e,t){return y(\"li\",{className:\"list-unstyled\",key:e._id},y(\"input\",{type:\"checkbox\",checked:O.includes(e._id),onChange:S(e._id),className:\"mr-2\"}),y(\"label\",{className:\"form-check-label\"},e.name))})))),y(\"div\",{className:\"form-group\"},y(\"label\",{className:\"text-muted ml-4\"},\"Type\"),y(u.a.Fragment,null,y(\"div\",{className:\"form-check ml-3\"},y(\"label\",{className:\"form-check-label\"},y(\"input\",{type:\"radio\",onClick:C,checked:\"free\"===w,value:\"free\",className:\"from-check-input\",name:\"type\"}),\" \",\"Free\")),y(\"div\",{className:\"form-check ml-3\"},y(\"label\",{className:\"form-check-label\"},y(\"input\",{type:\"radio\",onClick:C,checked:\"paid\"===w,value:\"paid\",className:\"from-check-input\",name:\"type\"}),\" \",\"Paid\")))),y(\"div\",{className:\"form-group\"},y(\"label\",{className:\"text-muted ml-4\"},\"Medium\"),y(u.a.Fragment,null,y(\"div\",{className:\"form-check ml-3\"},y(\"label\",{className:\"form-check-label\"},y(\"input\",{type:\"radio\",onClick:L,checked:\"video\"===P,value:\"video\",className:\"from-check-input\",name:\"medium\"}),\" \",\"Video\")),y(\"div\",{className:\"form-check ml-3\"},y(\"label\",{className:\"form-check-label\"},y(\"input\",{type:\"radio\",onClick:L,checked:\"book\"===P,value:\"book\",className:\"from-check-input\",name:\"medium\"}),\" \",\"Book\"))))),y(\"div\",{className:\"col-md-8\"},j&&Object(v.b)(j),N&&Object(v.a)(N),y(\"form\",{onSubmit:I},y(\"div\",{className:\"form-group\"},y(\"label\",{className:\"text-muted\"},\"Title\"),y(\"input\",{type:\"text\",className:\"form-control\",onChange:E,value:f})),y(\"div\",{className:\"form-group\"},y(\"label\",{className:\"text-muted\"},\"URL\"),y(\"input\",{type:\"url\",className:\"form-control\",onChange:_,value:g})),y(\"div\",null,y(\"button\",{disabled:!r,className:\"btn btn-outline-warning\",type:\"submit\"},Object(d.c)()||r?\"Update\":\"Login to update\"))))))};O.getInitialProps=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.req,r=t.token,n=t.query,e.next=3,p.a.get(\"\".concat(b.a,\"/link/\").concat(n.id));case 3:return a=e.sent,e.abrupt(\"return\",{oldLink:a.data,token:r});case 5:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.default=Object(f.default)(O)},mseQ:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/user/link/[id]\",function(){return r(\"XL7u\")}])},rePB:function(e,t,r){\"use strict\";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,\"a\",(function(){return n}))}},[[\"mseQ\",1,0,2,3,4]]]);","extractedComments":[]}