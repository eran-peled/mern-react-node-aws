_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[30],{DDIX:function(e,t,n){"use strict";n.r(t);var r=n("o0o1"),a=n.n(r),c=n("HaE+"),s=n("q1tI"),o=n.n(s),l=n("5Yp1"),i=n("YFqc"),u=n.n(i),p=n("nOHt"),d=n.n(p),f=n("vDqi"),b=n.n(f),m=n("wd/R"),k=n.n(m),v=n("obyI"),h=(n("rZ7M"),n("KJME")),w=o.a.createElement;t.default=Object(h.default)((function(e){var t=e.user,n=e.userLinks,r=e.token,s=function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("delete link > ",t),e.prev=1,e.next=4,b.a.delete("".concat(v.a,"/link/").concat(t),{headers:{Authorization:"Bearer ".concat(r)}});case 4:n=e.sent,console.log("LINK DELETE SUCCESS ",n),d.a.replace("/user"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("LINK DELETE ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return w(l.a,null,w("h1",null,t.name,"'s dashboard ",w("span",{className:"text-danger"},"/",t.role)),w("hr",null),w("div",{className:"row"},w("div",{className:"col-md-4"},w("ul",{className:"nav flex-column"},w("li",{className:"nav-item"},w(u.a,{href:"/user/link/create"},w("a",{className:"nav link"},"Submit a link"))),w("li",{className:"nav-item"},w(u.a,{href:"/user/profile/update"},w("a",{className:"nav link"},"Update profile"))))),w("div",{className:"col-md-8"},w("h2",null,"Your links"),w("br",null),n.map((function(e,t){return w("div",{key:t,className:"row alert alert-primary p-2"},w("div",{className:"col-md-8"},w("a",{href:e.url,target:"_blank"},w("h5",{className:"pt-2"},e.title),w("h6",{className:"pt-2 text-danger",style:{fontSize:"12px"}},e.url))),w("div",{className:"col-md-4 pt-2"},w("span",{className:"pull-right"},k()(e.createdAt).fromNow()," by ",e.postedBy.name)),w("div",{className:"col-md-12"},w("span",{className:"badge text-dark"},e.type," / ",e.medium),e.categories.map((function(e,t){return w("span",{key:t,className:"badge text-success"},e.name)})),w("span",{className:"badge text-secondary"},e.clicks," clicks"),w(u.a,{href:"/user/link/".concat(e._id)},w("span",{className:"badge text-warning pull-right"},"Update")),w("span",{onClick:function(t){return function(e,t){e.preventDefault(),window.confirm("Are you sure you want to delete?")&&s(t)}(t,e._id)},className:"badge text-danger pull-right"},"Delete")))})))))}))},KJME:function(e,t,n){"use strict";n.r(t);var r=n("o0o1"),a=n.n(r),c=n("rePB"),s=n("HaE+"),o=n("q1tI"),l=n.n(o),i=n("vDqi"),u=n.n(i),p=n("obyI"),d=n("rZ7M"),f=l.a.createElement;function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(e){var t=function(t){return f(e,t)};return t.getInitialProps=function(){var t=Object(s.a)(a.a.mark((function t(n){var r,c,s,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Object(d.b)("token",n.req),c=null,s=[],!r){t.next=16;break}return t.prev=4,t.next=7,u.a.get("".concat(p.a,"/user"),{headers:{authorization:"Bearer ".concat(r),contentType:"application/json"}});case 7:o=t.sent,console.log("response in withUser",o),c=o.data.user,s=o.data.links,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),401===t.t0.response.status&&(c=null);case 16:if(null!==c){t.next=21;break}n.res.writeHead(302,{Location:"/"}),n.res.end(),t.next=36;break;case 21:if(t.t1=m,t.t2=m,t.t3={},!e.getInitialProps){t.next=30;break}return t.next=27,e.getInitialProps(n);case 27:t.t4=t.sent,t.next=31;break;case 30:t.t4={};case 31:return t.t5=t.t4,t.t6=(0,t.t2)(t.t3,t.t5),t.t7={},t.t8={user:c,token:r,userLinks:s},t.abrupt("return",(0,t.t1)(t.t6,t.t7,t.t8));case 36:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e){return t.apply(this,arguments)}}(),t}},YuTi:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},dMze:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user",function(){return n("DDIX")}])},rePB:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))}},[["dMze",1,0,8,2,3,4,7]]]);