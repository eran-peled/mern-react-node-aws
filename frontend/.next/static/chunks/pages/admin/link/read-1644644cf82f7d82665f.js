_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[22],{bwBU:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/link/read",function(){return n("gouQ")}])},gouQ:function(e,t,n){"use strict";n.r(t);var a=n("KQm4"),r=n("o0o1"),c=n.n(r),i=n("HaE+"),o=n("q1tI"),s=n.n(o),u=n("5Yp1"),l=n("YFqc"),p=n.n(l),d=n("vDqi"),f=n.n(d),b=(n("wHCo"),n("wd/R")),m=n.n(b),k=n("obyI"),g=n("RotF"),w=n.n(g),h=n("tOng"),v=n("rZ7M"),O=s.a.createElement,y=function(e){var t=e.token,n=e.links,r=e.totalLinks,s=e.linksLimit,l=(e.linkSkip,Object(o.useState)(n)),d=l[0],b=l[1],g=Object(o.useState)(s),h=g[0],v=(g[1],Object(o.useState)(0)),y=v[0],j=v[1],N=Object(o.useState)(r),x=N[0],E=N[1],P=function(){var e=Object(i.a)(c.a.mark((function e(n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.delete("".concat(k.a,"/link/admin/").concat(n),{headers:{Authorization:"Bearer ".concat(t)}});case 3:a=e.sent,console.log("LINK DELETE SUCCESS ",a),window.location.reload(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("LINK DELETE ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(i.a)(c.a.mark((function e(){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y+h,e.next=3,f.a.post("".concat(k.a,"/links"),{skip:n,limit:h},{headers:{Authorization:"Bearer ".concat(t)}});case 3:r=e.sent,b([].concat(Object(a.a)(d),Object(a.a)(r.data))),E(r.data.length),j(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return O(u.a,null,O("div",{className:"row"},O("div",{className:"col-md-12"},O("h1",{className:"display-4 font-weight-bold"},"All Links"))),O("br",null),O(w.a,{pageStart:0,loadMore:_,hasMore:x>0&&x>=h,loader:O("img",{key:0,src:"/static/images/loading.gif",alt:"loading"})},O("div",{className:"row"},O("div",{className:"col-md-12"},d.map((function(e,t){return O("div",{key:t,className:"row alert alert-primary p-2"},O("div",{className:"col-md-8",onClick:function(t){return handleClick(e._id)}},O("a",{href:e.url,target:"_blank"},O("h5",{className:"pt-2"},e.title),O("h6",{className:"pt-2 text-danger",style:{fontSize:"12px"}},e.url))),O("div",{className:"col-md-4 pt-2"},O("span",{className:"pull-right"},m()(e.createdAt).fromNow()," by ",e.postedBy.name),O("br",null),O("span",{className:"badge text-secondary pull-right"},e.clicks," clicks")),O("div",{className:"col-md-12"},O("span",{className:"badge text-dark"},e.type," / ",e.medium),e.categories.map((function(e,t){return O("span",{key:t,className:"badge text-success"},e.name)})),O("span",{onClick:function(t){return function(e,t){e.preventDefault(),window.confirm("Are you sure you want to delete?")&&P(t)}(t,e._id)},className:"badge text-danger pull-right"},"Delete"),O(p.a,{href:"/user/link/".concat(e._id)},O("a",null,O("span",{className:"badge text-warning pull-right"},"Update")))))}))))))};y.getInitialProps=function(){var e=Object(i.a)(c.a.mark((function e(t){var n,a,r,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.req,a=0,r=2,i=Object(v.b)("token",n),e.next=6,f.a.post("".concat(k.a,"/links"),{skip:a,limit:r},{headers:{Authorization:"Bearer ".concat(i)}});case 6:return o=e.sent,e.abrupt("return",{links:o.data,totalLinks:o.data.length,linksLimit:r,linkSkip:a,token:i});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.default=Object(h.default)(y)},rePB:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return a}))},tOng:function(e,t,n){"use strict";n.r(t);var a=n("o0o1"),r=n.n(a),c=n("rePB"),i=n("HaE+"),o=n("q1tI"),s=n.n(o),u=n("vDqi"),l=n.n(u),p=n("obyI"),d=n("rZ7M"),f=s.a.createElement;function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(e){var t=function(t){return f(e,t)};return t.getInitialProps=function(){var t=Object(i.a)(r.a.mark((function t(n){var a,c,i,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=Object(d.b)("token",n.req),c=null,i=[],!a){t.next=15;break}return t.prev=4,t.next=7,l.a.get("".concat(p.a,"/admin"),{headers:{authorization:"Bearer ".concat(a),contentType:"application/json"}});case 7:o=t.sent,c=o.data.user,i=o.data.links,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),401===t.t0.response.status&&(c=null);case 15:if(null!==c){t.next=20;break}n.res.writeHead(302,{Location:"/"}),n.res.end(),t.next=35;break;case 20:if(t.t1=m,t.t2=m,t.t3={},!e.getInitialProps){t.next=29;break}return t.next=26,e.getInitialProps(n);case 26:t.t4=t.sent,t.next=30;break;case 29:t.t4={};case 30:return t.t5=t.t4,t.t6=(0,t.t2)(t.t3,t.t5),t.t7={},t.t8={user:c,token:a,userLinks:i},t.abrupt("return",(0,t.t1)(t.t6,t.t7,t.t8));case 35:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}(),t}}},[["bwBU",1,0,8,2,3,4,5,7,6,10]]]);